{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/shared/services/candidato.service\";\nimport * as i3 from \"src/app/login/services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction ContaComponent_button_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ContaComponent_button_22_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleEdicao());\n    });\n    i0.ɵɵtext(1, \" Alterar dados \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ContaComponent_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ContaComponent_button_23_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.atualizarDados());\n    });\n    i0.ɵɵtext(1, \" Atualizar \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ContaComponent = /*#__PURE__*/(() => {\n  class ContaComponent {\n    constructor(fb, candidatoService, authService, router) {\n      this.fb = fb;\n      this.candidatoService = candidatoService;\n      this.authService = authService;\n      this.router = router;\n      this.editando = false;\n    }\n    ngOnInit() {\n      this.form = this.fb.group({\n        nome: [''],\n        email: [''],\n        dataNascimento: [''],\n        telefone: [''],\n        curriculo: ['']\n      });\n      this.toggleFormState();\n      const id = this.authService.obterUsuarioId();\n      if (id !== null) {\n        this.candidatoId = id;\n        this.carregarCandidato();\n      } else {\n        console.error('ID do candidato não encontrado no token.');\n      }\n    }\n    toggleEdicao() {\n      this.editando = !this.editando;\n      this.toggleFormState();\n      if (!this.editando) {}\n    }\n    carregarCandidato() {\n      this.candidatoService.getCandidatoById(this.candidatoId).subscribe({\n        next: candidato => {\n          this.form.patchValue({\n            nome: candidato.nome,\n            email: candidato.email,\n            dataNascimento: candidato.dtNascimento,\n            telefone: candidato.telefone,\n            curriculo: candidato.curriculo ?? ''\n          });\n        },\n        error: err => {\n          console.error('Erro ao buscar candidato:', err);\n        }\n      });\n    }\n    deletarCandidato() {\n      if (confirm('Tem certeza que deseja deletar sua conta? Esta ação não pode ser desfeita.')) {\n        this.candidatoService.deleteCandidato(this.candidatoId).subscribe({\n          next: () => {\n            alert('Conta deletada com sucesso.');\n            this.router.navigate(['/login']);\n          },\n          error: err => {\n            console.error('Erro ao deletar conta:', err);\n            alert('Erro ao deletar a conta.');\n          }\n        });\n      }\n    }\n    toggleFormState() {\n      if (this.editando) {\n        this.form.enable();\n      } else {\n        this.form.disable();\n      }\n    }\n    static {\n      this.ɵfac = function ContaComponent_Factory(t) {\n        return new (t || ContaComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CandidatoService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ContaComponent,\n        selectors: [[\"app-conta\"]],\n        decls: 26,\n        vars: 7,\n        consts: [[1, \"perfil-container\"], [1, \"perfil-title\"], [3, \"formGroup\"], [1, \"input-row\"], [1, \"input-wrapper\"], [\"type\", \"text\", \"formControlName\", \"nome\", 3, \"readonly\"], [\"type\", \"email\", \"formControlName\", \"email\", 3, \"readonly\"], [\"type\", \"file\", \"formControlName\", \"curriculo\", 3, \"readonly\"], [\"type\", \"tel\", \"formControlName\", \"telefone\", 3, \"readonly\"], [\"type\", \"button\", \"class\", \"perfil-btn\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-delete\", \"perfil-btn\", 3, \"click\"], [\"type\", \"button\", 1, \"perfil-btn\", 3, \"click\"]],\n        template: function ContaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n            i0.ɵɵtext(2, \"Minha Conta\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"label\");\n            i0.ɵɵtext(7, \"Nome Completo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\");\n            i0.ɵɵtext(11, \"E-mail\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 6);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 3)(14, \"div\", 4)(15, \"label\");\n            i0.ɵɵtext(16, \"Curriculo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(17, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"div\", 4)(19, \"label\");\n            i0.ɵɵtext(20, \"Telefone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(21, \"input\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(22, ContaComponent_button_22_Template, 2, 0, \"button\", 9)(23, ContaComponent_button_23_Template, 2, 0, \"button\", 9);\n            i0.ɵɵelementStart(24, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ContaComponent_Template_button_click_24_listener() {\n              return ctx.deletarCandidato();\n            });\n            i0.ɵɵtext(25, \" Deletar \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"readonly\", !ctx.editando);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"readonly\", !ctx.editando);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"readonly\", !ctx.editando);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"readonly\", !ctx.editando);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.editando);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.editando);\n          }\n        },\n        dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".perfil-container[_ngcontent-%COMP%]{margin-left:220px;padding:40px 20px;font-family:Segoe UI,sans-serif}.perfil-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:30px;color:#333}.input-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.input-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;margin-bottom:6px}input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:4px;background-color:#f3f3f3;font-size:14px}input[readonly][_ngcontent-%COMP%]{background-color:#eaeaea;cursor:not-allowed}.perfil-btn[_ngcontent-%COMP%]{background-color:#044894;color:#fff;padding:10px 25px;font-size:15px;border:none;border-radius:4px;cursor:pointer;margin-top:20px}.perfil-btn[_ngcontent-%COMP%]:hover{background-color:#033773}.btn-delete[_ngcontent-%COMP%]{border:2px solid red;background-color:#fff;color:red;padding:8px 16px;cursor:pointer;font-weight:700;margin-left:10px;border-radius:4px;transition:background-color .3s,color .3s}.btn-delete[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}\"]\n      });\n    }\n  }\n  return ContaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}